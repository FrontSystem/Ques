define("./components/todoapp/storage",["require","module","exports"],function(t,e,n){var i="todos-quesjs";e.exports={fetch:function(){var t=[];try{t=JSON.parse(localStorage.getItem(i)||"[]")}catch(e){return t}return t},save:function(t){window.JSON&&localStorage.setItem(i,JSON.stringify(t))}}}),define("filters",["require","module","exports"],function(t,e,n){var i=/(\d{3})(?=\d)/g,r={enter:13,tab:9,"delete":46,up:38,left:37,right:39,down:40,esc:27};e.exports={json:{read:function(t,e){return"string"==typeof t?t:JSON.stringify(t,null,Number(e)||2)},write:function(t){try{return JSON.parse(t)}catch(e){return t}}},capitalize:function(t){return t||0===t?(t=t.toString(),t.charAt(0).toUpperCase()+t.slice(1)):""},uppercase:function(t){return t||0===t?t.toString().toUpperCase():""},lowercase:function(t){return t||0===t?t.toString().toLowerCase():""},currency:function(t,e){if(t=parseFloat(t),!t&&0!==t)return"";e=e||"$";var n=Math.floor(Math.abs(t)).toString(),r=n.length%3,o=r>0?n.slice(0,r)+(n.length>3?",":""):"",s="."+t.toFixed(2).slice(-2);return(0>t?"-":"")+e+o+n.slice(r).replace(i,"$1,")+s},pluralize:function(t){var e=[].slice.call(arguments,1);return e.length>1?e[t%10-1]||e[e.length-1]:e[0]+(1===t?"":"s")},key:function(t,e){if(t){var n=r[e];return n||(n=parseInt(e,10)),function(e){return e.keyCode===n?t.call(this,e):void 0}}},turnback:function(t){return t}}}),define("./components/todoapp/main",["require","module","exports","./storage","filters"],function(t,e,n){function i(t){return t.filter(function(t){return!t.completed})}function r(t){return i(t).length}function o(t){return t.length-r(t)}function s(t){return!r(t)}var a=t("./storage"),h=t("filters");e.exports={data:{todos:a.fetch(),newTodo:"",editedTodo:null,activeFilter:"all",filters:{all:function(){return!0},active:function(t){return!t.completed},completed:function(t){return t.completed}}},directives:{"todo-focus":function(t){if(t){var e=this.el;setTimeout(function(){e.focus()},0)}}},ready:function(){var t=this;this.$watch("todos",function(){a.save(t.todos.$get())},!0)},filters:{calRemaining:r,calCompleted:o,size:function(t){return t.length},key:h.key,pluralize:h.pluralize,filterTodos:function(t){return t.filter(this.filters[this.activeFilter])},checkActive:function(t,e){return t===e},filterRemaining:i,isAllSelect:s},methods:{addTodo:function(t){t.target.value&&(this.todos.push({title:t.target.value,completed:!1}),t.target.value="")},editTodo:function(t){t.$set("editing",!0)},removeTodo:function(t){var e=this.todos,n=e.indexOf(t);~n&&e.splice(n,1)},doneEdit:function(t){t.$set("editing",!1)},toggleItem:function(t){t.$set("completed",!t.completed)},toggleAll:function(){var t=!0,e=this.todos;s(e)&&(t=!1),e.forEach(function(e){e.completed!==t&&e.$set("completed",t)})},removeCompleted:function(){this.todos.forEach(function(t){t.completed!==!1&&t.$set("completed",!1)})}}}}),define("./pages/todomvc/director",["require","module","exports"],function(t,e,n){!function(t){function e(){return""===c.hash||"#"===c.hash}function n(t,e){for(var n=0;n<t.length;n+=1)if(e(t[n],n,t)===!1)return}function i(t){for(var e=[],n=0,i=t.length;i>n;n++)e=e.concat(t[n]);return e}function r(t,e,n){if(!t.length)return n();var i=0;!function r(){e(t[i],function(e){e||e===!1?(n(e),n=function(){}):(i+=1,i===t.length?n():r())})}()}function o(t,e,n){n=t;for(var i in e)if(e.hasOwnProperty(i)&&(n=e[i](t),n!==t))break;return n===t?"([._a-zA-Z0-9-]+)":n}function a(t,e){for(var n,i=0,r="";n=t.substr(i).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)i=n.index+n[0].length,n[0]=n[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),r+=t.substr(0,n.index)+n[0];t=r+=t.substr(i);var s,a,h=t.match(/:([^\/]+)/gi);if(h){a=h.length;for(var c=0;a>c;c++)s=h[c],t="::"===s.slice(0,2)?s.slice(1):t.replace(s,o(s,e))}return t}function h(t,e,n,i){var r,o=0,s=0,a=0,n=(n||"(").toString(),i=(i||")").toString();for(r=0;r<t.length;r++){var h=t[r];if(h.indexOf(n,o)>h.indexOf(i,o)||~h.indexOf(n,o)&&!~h.indexOf(i,o)||!~h.indexOf(n,o)&&~h.indexOf(i,o)){if(s=h.indexOf(n,o),a=h.indexOf(i,o),~s&&!~a||!~s&&~a){var c=t.slice(0,(r||1)+1).join(e);t=[c].concat(t.slice((r||1)+1))}o=(a>s?a:s)+1,r=0}else o=0}return t}Array.prototype.filter||(Array.prototype.filter=function(t,e){for(var n,i=[],r=0,o=this.length;o>r;r++)r in this&&t.call(e,n=this[r],r,this)&&i.push(n);return i}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)});var c=document.location,u={mode:"modern",hash:c.hash,history:!1,check:function(){var t=c.hash;t!=this.hash&&(this.hash=t,this.onHashChanged())},fire:function(){"modern"===this.mode?this.history===!0?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(t,e){function n(t){for(var e=0,n=f.listeners.length;n>e;e++)f.listeners[e](t)}var i=this;if(this.history=e,f.listeners||(f.listeners=[]),"onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7))this.history===!0?setTimeout(function(){window.onpopstate=n},500):window.onhashchange=n,this.mode="modern";else{var r=document.createElement("iframe");r.id="state-frame",r.style.display="none",document.body.appendChild(r),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){"location"===event.propertyName&&i.check()}),window.setInterval(function(){i.check()},50),this.onHashChanged=n,this.mode="legacy"}return f.listeners.push(t),this.mode},destroy:function(t){if(f&&f.listeners)for(var e=f.listeners,n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1)},setHash:function(t){return"legacy"===this.mode&&this.writeFrame(t),this.history===!0?(window.history.pushState({},document.title,t),this.fire()):c.hash="/"===t[0]?t:"/"+t,this},writeFrame:function(t){var e=document.getElementById("state-frame"),n=e.contentDocument||e.contentWindow.document;n.open(),n.write("<script>_hash = '"+t+"'; onload = parent.listener.syncHash;<script>"),n.close()},syncHash:function(){var t=this._hash;return t!=c.hash&&(c.hash=t),this},onHashChanged:function(){}},f=t.Router=function(t){return this instanceof f?(this.params={},this.routes={},this.methods=["on","once","after","before"],this.scope=[],this._methods={},this._insert=this.insert,this.insert=this.insertEx,this.historySupport=null!=(null!=window.history?window.history.pushState:null),this.configure(),void this.mount(t||{})):new f(t)};f.prototype.init=function(t){var n=this;if(this.handler=function(t){var e=t&&t.newURL||window.location.hash,i=n.history===!0?n.getPath():e.replace(/.*#/,"");n.dispatch("on","/"===i.charAt(0)?i:"/"+i)},u.init(this.handler,this.history),this.history===!1)e()&&t?c.hash=t:e()||n.dispatch("on","/"+c.hash.replace(/^(#\/|#|\/)/,""));else{var i=e()&&t?t:e()?null:c.hash.replace(/^#/,"");i&&window.history.replaceState({},document.title,i),(i||this.run_in_init===!0)&&this.handler()}return this},f.prototype.explode=function(){var t=this.history===!0?this.getPath():c.hash;return"/"===t.charAt(1)&&(t=t.slice(1)),t.slice(1,t.length).split("/")},f.prototype.setRoute=function(t,e,n){var i=this.explode();return"number"==typeof t&&"string"==typeof e?i[t]=e:"string"==typeof n?i.splice(t,e,s):i=[t],u.setHash(i.join("/")),i},f.prototype.insertEx=function(t,e,n,i){return"once"===t&&(t="on",n=function(t){var e=!1;return function(){return e?void 0:(e=!0,t.apply(this,arguments))}}(n)),this._insert(t,e,n,i)},f.prototype.getRoute=function(t){var e=t;if("number"==typeof t)e=this.explode()[t];else if("string"==typeof t){var n=this.explode();e=n.indexOf(t)}else e=this.explode();return e},f.prototype.destroy=function(){return u.destroy(this.handler),this},f.prototype.getPath=function(){var t=window.location.pathname;return"/"!==t.substr(0,1)&&(t="/"+t),t},f.prototype.configure=function(t){t=t||{};for(var e=0;e<this.methods.length;e++)this._methods[this.methods[e]]=!0;return this.recurse=t.recurse||this.recurse||!1,this.async=t.async||!1,this.delimiter=t.delimiter||"/",this.strict="undefined"==typeof t.strict?!0:t.strict,this.notfound=t.notfound,this.resource=t.resource,this.history=t.html5history&&this.historySupport||!1,this.run_in_init=this.history===!0&&t.run_handler_in_init!==!1,this.every={after:t.after||null,before:t.before||null,on:t.on||null},this},f.prototype.param=function(t,e){":"!==t[0]&&(t=":"+t);var n=new RegExp(t,"g");this.params[t]=function(t){return t.replace(n,e.source||e)}},f.prototype.on=f.prototype.route=function(t,e,n){var i=this;return n||"function"!=typeof e||(n=e,e=t,t="on"),Array.isArray(e)?e.forEach(function(e){i.on(t,e,n)}):(e.source&&(e=e.source.replace(/\\\//gi,"/")),Array.isArray(t)?t.forEach(function(t){i.on(t.toLowerCase(),e,n)}):(e=e.split(new RegExp(this.delimiter)),e=h(e,this.delimiter),void this.insert(t,this.scope.concat(e),n)))},f.prototype.dispatch=function(t,e,n){function i(){o.last=s.after,o.invoke(o.runlist(s),o,n)}var r,o=this,s=this.traverse(t,e,this.routes,""),a=this._invoked;return this._invoked=!0,s&&0!==s.length?("forward"===this.recurse&&(s=s.reverse()),r=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last],r&&r.length>0&&a?(this.async?this.invoke(r,this,i):(this.invoke(r,this),i()),!0):(i(),!0)):(this.last=[],"function"==typeof this.notfound&&this.invoke([this.notfound],{method:t,path:e},n),!1)},f.prototype.invoke=function(t,e,i){var o,s=this;this.async?(o=function(n,i){return Array.isArray(n)?r(n,o,i):void("function"==typeof n&&n.apply(e,t.captures.concat(i)))},r(t,o,function(){i&&i.apply(e,arguments)})):(o=function(i){return Array.isArray(i)?n(i,o):"function"==typeof i?i.apply(e,t.captures||[]):void("string"==typeof i&&s.resource&&s.resource[i].apply(e,t.captures||[]))},n(t,o))},f.prototype.traverse=function(t,e,n,i,r){function o(t){function e(t){for(var n=[],i=0;i<t.length;i++)n[i]=Array.isArray(t[i])?e(t[i]):t[i];return n}function n(t){for(var e=t.length-1;e>=0;e--)Array.isArray(t[e])?(n(t[e]),0===t[e].length&&t.splice(e,1)):r(t[e])||t.splice(e,1)}if(!r)return t;var i=e(t);return i.matched=t.matched,i.captures=t.captures,i.after=t.after.filter(r),n(i),i}var s,a,h,c,u=[];if(e===this.delimiter&&n[t])return c=[[n.before,n[t]].filter(Boolean)],c.after=[n.after].filter(Boolean),c.matched=!0,c.captures=[],o(c);for(var f in n)if(n.hasOwnProperty(f)&&(!this._methods[f]||this._methods[f]&&"object"==typeof n[f]&&!Array.isArray(n[f]))){if(s=a=i+this.delimiter+f,this.strict||(a+="["+this.delimiter+"]?"),h=e.match(new RegExp("^"+a)),!h)continue;if(h[0]&&h[0]==e&&n[f][t])return c=[[n[f].before,n[f][t]].filter(Boolean)],c.after=[n[f].after].filter(Boolean),c.matched=!0,c.captures=h.slice(1),this.recurse&&n===this.routes&&(c.push([n.before,n.on].filter(Boolean)),c.after=c.after.concat([n.after].filter(Boolean))),o(c);if(c=this.traverse(t,e,n[f],s),c.matched)return c.length>0&&(u=u.concat(c)),this.recurse&&(u.push([n[f].before,n[f].on].filter(Boolean)),c.after=c.after.concat([n[f].after].filter(Boolean)),n===this.routes&&(u.push([n.before,n.on].filter(Boolean)),c.after=c.after.concat([n.after].filter(Boolean)))),u.matched=!0,u.captures=c.captures,u.after=c.after,o(u)}return!1},f.prototype.insert=function(t,e,n,i){var r,o,s,h,c;if(e=e.filter(function(t){return t&&t.length>0}),i=i||this.routes,c=e.shift(),/\:|\*/.test(c)&&!/\\d|\\w/.test(c)&&(c=a(c,this.params)),e.length>0)return i[c]=i[c]||{},this.insert(t,e,n,i[c]);if(c||e.length||i!==this.routes){if(o=typeof i[c],s=Array.isArray(i[c]),i[c]&&!s&&"object"==o)switch(r=typeof i[c][t]){case"function":return void(i[c][t]=[i[c][t],n]);case"object":return void i[c][t].push(n);case"undefined":return void(i[c][t]=n)}else if("undefined"==o)return h={},h[t]=n,void(i[c]=h);throw new Error("Invalid route context: "+o)}switch(r=typeof i[t]){case"function":return void(i[t]=[i[t],n]);case"object":return void i[t].push(n);case"undefined":return void(i[t]=n)}},f.prototype.extend=function(t){function e(t){i._methods[t]=!0,i[t]=function(){var e=1===arguments.length?[t,""]:[t];i.on.apply(i,e.concat(Array.prototype.slice.call(arguments)))}}var n,i=this,r=t.length;for(n=0;r>n;n++)e(t[n])},f.prototype.runlist=function(t){var e=this.every&&this.every.before?[this.every.before].concat(i(t)):i(t);return this.every&&this.every.on&&e.push(this.every.on),e.captures=t.captures,e.source=t.source,e},f.prototype.mount=function(t,e){function n(e,n){var r=e,o=e.split(i.delimiter),s=typeof t[e],a=""===o[0]||!i._methods[o[0]],c=a?"on":r;return a&&(r=r.slice((r.match(new RegExp("^"+i.delimiter))||[""])[0].length),o.shift()),a&&"object"===s&&!Array.isArray(t[e])?(n=n.concat(o),void i.mount(t[e],n)):(a&&(n=n.concat(r.split(i.delimiter)),n=h(n,i.delimiter)),void i.insert(c,n,t[e]))}if(t&&"object"==typeof t&&!Array.isArray(t)){var i=this;e=e||[],Array.isArray(e)||(e=e.split(i.delimiter));for(var r in t)t.hasOwnProperty(r)&&n(r,e.slice(0))}}}("object"==typeof n?n:window)}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define("Q.core",["jquery"],e):"object"==typeof exports?exports.Q=e(require("jquery")):t.Q=e(t.jQuery)}(this,function(t){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var i=n(1),r=n(3),o=n(5);r.extend(i,r),t.exports=o(i)},function(t,e,n){function i(t,e,n){for(var i,r=0,o=h.length;o>r;r++)if(i="q-"+h[r],t.hasAttribute(i))return e.push({name:i,value:t.getAttribute(i)}),t.removeAttribute(i),!0}function r(t,e,n){var o,s,h,f,l,d,p;for(o=0;f=t[o++];){if(1===f.nodeType){if(l=f.attributes,d=[],!i(f,d,n)){for(s=0,h=l.length;h>s;s++)0===l[s].name.indexOf("q-")&&d.push({name:l[s].name,value:l[s].value});n.useCache&&!p&&(p=p||++c,f.setAttribute("qtid",p),a.put(p,d))}d.length>0&&e(f,d,n)}f.childNodes.length&&!n.stop&&r(u.call(f.childNodes,0),e,n),n.stop=!1}}var o=function(){},s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||setTimeout,a=new(n(2))(1e3),h=["vm","repeat","if"],c=0,u=[].slice;t.exports={slice:u,noop:o,addClass:function(t,e){if(t.classList)t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}},removeClass:function(t,e){if(t.classList)t.classList.remove(e);else{for(var n=" "+(t.getAttribute("class")||"")+" ",i=" "+e+" ";n.indexOf(i)>=0;)n=n.replace(i," ");t.setAttribute("class",n.trim())}},noexist:function(t,e){throw this.warn(t),new Error("Filter "+e+" hasn't implemented.")},warn:function(){return window.console&&console.error?function(){console.error.apply(console,arguments)}:o}(),isObject:function(t){return"object"==typeof t},nextTick:function(t,e){return e?s(function(){t.call(e)},0):s(t,0)},walk:r}},function(t,e,n){function i(t){this.size=0,this.limit=t,this.head=this.tail=void 0,this._keymap={}}var r=i.prototype;r.put=function(t,e){var n={key:t,value:e};return this._keymap[t]=n,this.tail?(this.tail.newer=n,n.older=this.tail):this.head=n,this.tail=n,this.size===this.limit?this.shift():void this.size++},r.shift=function(){var t=this.head;return t&&(this.head=this.head.newer,this.head.older=void 0,t.newer=t.older=void 0,this._keymap[t.key]=void 0),t},r.get=function(t,e){var n=this._keymap[t];if(void 0!==n)return n===this.tail?e?n:n.value:(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n,e?n:n.value)},t.exports=i},function(t,e,n){var i=n(4);t.exports={find:i.find,contains:i.contains,data:i.data,cleanData:i.cleanData,add:i.event.add,remove:i.event.remove,clone:i.clone,extend:i.extend}},function(e,n,i){e.exports=t},function(t,e,n){t.exports=function(t){function e(e){return t.contains(h.documentElement,e)}function i(t){this._init(t)}var r=n(8),o=n(9),s=n(7).mergeOptions,a=n(6),h=document;return i._=t,i.options={directives:n(10),filters:{}},i.get=function(e){var n=t.find(e)[0];return n?t.data(n,"QI"):new this({el:e})},i.all=function(e){var n=this;return t.find(e.el).map(function(i){return new n(t.extend(e,{el:i}))})},t.extend(i,a),t.extend(i.prototype,{_init:function(e){e=e||{},this.$el=e.el&&"string"==typeof e.el?t.find(e.el)[0]:e.el,this.$$={},this.$parent=e._parent,e=this.$options=s(this.constructor.options,e,this),this._isCompiled=!1,this._isAttached=!1,this._isReady=!1,this._events={},this._watchers={},this._children=[],this.$={},r.call(this,e),this._initScope(),this._callHook("created"),this.$el&&(t.data(this.$el,"QI",this),this.$mount(this.$el))},data:function(t,e){if(void 0===t)return this;var n,i=0,r=this;if(~t.indexOf(".")){var o=t.split(".");for(n=o.length;n-1>i;i++)t=o[i],+t+""===t&&(t=+t),r=r[t]}return n&&(t=o[i]),void 0===e?t?r[t]:r:void r.$set(t,e)},$on:function(t,e){return(this._events[t]||(this._events[t]=[])).push(e),this},$once:function(t,e){function n(){i.$off(t,n),e.apply(this,arguments)}var i=this;return n.fn=e,this.$on(t,n),this},$off:function(t,e){var n,i,r;if(!arguments.length)return this._events={},this;if(n=this._events[t],!n)return this;if(1===arguments.length)return this._events[t]=null,this;for(r=n.length;r--;)if(i=n[r],i===e||i.fn===e){n.splice(r,1);break}return this},$watch:function(t,e,n,i){var r=n?t+"**deep**":t;return(this._watchers[r]||(this._watchers[r]=[])).push(e),i&&e(this.data(t)),this},$emit:function(e){var n=t.slice.call(arguments,1);return o.emit.call(this,e,t.slice.call(n,0)),0===e.indexOf("data:")&&(e=e.substring(5),o.callDataChange.call(this,e,t.slice.call(n,0)),n.unshift(e),o.emit.call(this,"datachange",n)),this},_initScope:function(){this._initMethods()},_initMethods:function(){var t,e=this.$options.methods;if(e)for(t in e)this[t]=e[t].bind(this)},$mount:function(n){return this._isCompiled?t.warn("$mount() should be called only once"):(this._compile(n),this._isCompiled=!0,this._callHook("compiled"),void(e(this.$el)?(this._callHook("attached"),this._ready()):this.$once("hook:attached",this._ready)))},_ready:function(){this._isAttached=!0,this._isReady=!0,this._callHook("ready")},_compile:function(t){this.transclue(t,this.$options)},transclue:function(e,n){t.find(".q-mark",e).length?this._renderedBind(e,n):this._templateBind(e,n)},_templateBind:n(12),_renderedBind:function(t,e){},_callHook:function(t){var e=this.$options[t];if(e)for(var n=0,i=e.length;i>n;n++)e[n].call(this);this.$emit("hook:"+t)},_makeReadFilters:function(e){if(!e.length)return[];var n=this.$options.filters,i=this;return e.map(function(e){e=[].concat(e);var r=e.shift(),o=n[r]?n[r].read||n[r]:t.noexist(i,r);return function(t,n){return e?o.apply(i,[t].concat(e.push(n)&&e)):o.call(i,t,n)}})},applyFilters:function(t,e,n){if(!e||!e.length)return t;for(var i=0,r=e.length;r>i;i++)t=e[i].call(this,t,n);return t}}),t.extend(i.prototype,r.prototype),i}},function(t,e,n){function i(t,e){if(h[t])return!1;var n=h[t]=this.extend(e||{});return n}function r(t,e){return h[t]||this}function o(t){function e(){}return e.prototype=t,new e}function s(t){t=t||{};var e=this,n=a(t.name||"QComponent");return n.prototype=o(e.prototype),n.prototype.constructor=n,n.options=c(e.options,t),n["super"]=e,["extend","get","all","require","define"].forEach(function(t){n[t]=e[t]}),n}function a(t){return new Function("return function "+t+" (options) { this._init(options) }")()}var h={},c=n(7).mergeOptions;t.exports={define:i,require:r,extend:s}},function(t,e,n){function i(t,e,n){function i(i){var r=o[i]||s;a[i]=r(t[i],e[i],n,i)}var r,a={};for(r in t)i(r);for(r in e)t.hasOwnProperty(r)||i(r);return a}var r=n(1),o={};o.created=o.ready=o.attached=o.detached=o.compiled=o.beforeDestroy=o.destroyed=o.paramAttributes=function(t,e){return e?t?t.concat(e):Array.isArray(e)?e:[e]:t},o.filters=o.methods=o.directives=function(t,e){return e?t?r.extend({},t,e):e:t};var s=function(t,e){return void 0===e?t:e};t.exports={strats:o,mergeOptions:i}},function(t,e,n){function i(t,e,n){var i={data:n,up:t,top:t._top,namespace:e+""};t[e]="object"==typeof n&&null!==n?r(n)?new a(i):new s(i):n,~t._keys.indexOf(e)||t._keys.push(e)}function r(t){return Array.isArray(t)||t instanceof a}function o(t){return t.filter(function(t){return"number"==typeof t}).length}function s(t){var e=t.data,n=Object.keys(t.data||{}).filter(function(t){return 0!==t.indexOf("_")}).map(function(t){return+t+""===t?+t:t}),r=this;h.extend(this,e),this._keys=n,this._up=t.up,this._top=t.top||this,this._namespace=t.namespace||"",n.forEach(function(t){i(r,t,e[t])}),(Array.isArray(e)||e instanceof a)&&(this.length=o(n))}function a(t){s.call(this,t)}var h=n(1);h.extend(s.prototype,{$namespace:function(t){for(var e=[],n=this;void 0!=n;n=n._up)n._namespace&&e.unshift(n._namespace);return t&&e.push(t),e.join(".")},$key:function(){var t=this._namespace;return+t+""===t?+t:t},$up:function(){return this._up},$set:function(t,e){if("object"==typeof t){var n=this;Object.keys(t).forEach(function(e){n.$set(e,t[e])})}else{var r=this[t];i(this,t,e),this.$change(this.$namespace(t),this[t],r)}return this},$get:function(){var t,e=this._keys,n=this;return t=this instanceof s?{}:[],e.forEach(function(e){t[e]=n[e].$get?n[e].$get():n[e]}),t},$change:function(t,e,n,i){this._top.$emit&&this._top.$emit("data:"+t,e,n,i)}}),h.extend(a.prototype,s.prototype,{push:function(t){t=h.slice.call(arguments,0);for(var e=[],n=0,r=t.length;r>n;n++)i(this,this.length,t[n]),this._keys.push(this.length),e.push(this[this.length]),this.length++;return this.$change(this.$namespace(),this,null,{method:"push",res:e,args:t}),this},pop:function(){var t=this[--this.length];return delete this[this.length],this._keys.pop(),this.$change(this.$namespace(),this),t},unshift:function(t){this._keys.push(this.length),this.length++;for(var e=this.length;e--;)this[e]=this[e-1],"object"==typeof this[e]&&(this[e]._namespace=e+"");return i(this,0,t),this.$change(this.$namespace(),this),this},shift:function(){this.length--;for(var t=this[0],e=0,n=this.length;n>e;e++)this[e]=this[e+1],"object"==typeof this[e]&&(this[e]._namespace=e+"");return this._keys.pop(),delete this[this.length],this.$change(this.$namespace(),this),t},touch:function(t){this.$change(this.$namespace(t),this)},indexOf:function(t){if(t._up===this){var e=+t._namespace;if(this[e]===t)return e}else if("object"!=typeof t)for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},splice:function(t,e){for(var n={method:"splice",args:[t,e]},i=0,r=e+t,o=this.length-e;o>t;t++,i++)this[t]=this[r+i],"object"==typeof this[t]&&(this[t]._namespace=t+"");for(;t<this.length;t++)this[t]=null,delete this[t];this.length-=e,this._keys.splice(this.length,e),this.$change(this.$namespace(),this,null,n)},forEach:function(t){for(var e=0,n=this.length;n>e;e++)t(this[e],e)},filter:function(t){var e=[];return this.forEach(function(n,i){t(n)&&e.push(n)}),e}}),t.exports=s},function(t,e,n){function i(t,e,n){n=n||this;var r=this._events[t];if(r){var s=0;r=r.length>1?o.slice.call(r,0):r;for(var a=r.length;a>s;s++)r[s].apply(n,e)}t.indexOf("data:")&&t.indexOf("hook:")&&this.$parent&&i.call(this.$parent,t,e,n)}function r(t,e){var n,r,s=t.split("."),a={_events:this._watchers};for(i.call(a,t,e);s.length>0;)t=s.join("."),n=t+"**deep**",r=o.slice.call(e,0,1),r[0]=this.data(t),i.call(a,n,r),s.pop();i.call(a,"**deep**",[this])}var o=(n(8),n(1));t.exports={emit:i,callDataChange:r}},function(t,e,n){function i(t,e,n){~e.indexOf(".")?(e=s.exec(e),t.data(e[1]).$set(e[2],n)):t.$set(e,n)}var r=n(1),o=n(7),s=/^(.*)\.([\w\-]+)$/;t.exports={show:function(t){var e=this.el;e.style.display=t?"block":"none"},"class":function(t){var e=this.el,n=this.arg;n?t?r.addClass(e,n):r.removeClass(e,n):(this.lastVal&&r.removeClass(e,this.lastVal),t&&(r.addClass(e,t),this.lastVal=t))},value:function(t){var e=this.el;"checkbox"===e.type?e.checked=t:e.value=t},attr:function(t){if(void 0!==t){var e=this.arg,n=this.el;if("style"===e)if("object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&(n.style[i]=t[i]);else n.setAttribute(e,t);else e in n?n[e]=t:n.setAttribute(e,t)}},text:function(t){void 0!==t&&(this.el.textContent=null==t?"":t.toString())},html:function(t){this.el.innerHTML=t&&t.toString()||""},on:{bind:function(){var t=this,e=this.target,n=this.param,i=this.filters,o=this.vm,s=o.applyFilters(this.vm[e],i),a=n&&~n.indexOf("this")&&t.data();r.add(this.el,this.arg,function(t){if(!s||"function"!=typeof s)return r.warn("You need implement the "+e+" method.");var i=[];n?n.forEach(function(e){"e"===e?i.push(t):"this"===e&&i.push(a)}):i.push(t),s.apply(o,i)})}},model:{bind:function(){var t=this.target,e=this.namespace||"",n=this.el,i=this.vm,o=i.data(e),s=!1;r.add(n,"input propertychange change",function(e){s||o.$set(t,n.value)},i),r.add(n,"compositionstart",function(t){s=!0}),r.add(n,"compositionend",function(t){s=!1})},update:function(t){this.el.value=t}},vm:{bind:function(){this.el.removeAttribute("q-vm"),this.setting.stop=!0;var t,e,n=this.target,r=this.vm,s=this.el,a=s.getAttribute("q-ref")||!1,h=s.getAttribute("q-with")||"",c=s.getAttribute("q-extend"),u=this.namespace,f=u?[u,h].join("."):h,l=r.data(f),d=r.constructor.require(n),p=d.options.data;if(p&&Object.keys(p).forEach(function(t){t in l||l.$set(t,p[t])}),t={el:s,data:l.$get(),_parent:r},c&&(c=r.$options.extend[c])){if(c.data||c.el||c._parent)throw new Error("Extend Error");t=o.mergeOptions(t,c)}e=new d(t),r._children.push(e),a&&!function(){var t=r.$[a];t?t.length?t.push(e):r.$[a]=[t,e]:r.$[a]=e}();var m=!1,v=!1;r.$on("datachange",function(t,n,o,s){if(this===e)if(m)m=!1;else{v=!0;var a=f?[f,t].join("."):t;s?r[a][s.method].apply(r[a],s.args):i(r,a,n)}else if(this===r)if(v)v=!1;else if(!f||~t.indexOf(f)){m=!0;var h,c=f.length;c&&(c+=1),h=t.substring(c,t.length),s?e[h][s.method].apply(e[h],s.args):i(e,h,n)}})}},"if":{bind:function(){if(this.el.parentNode){var t=this.el,e=t.parentNode,n=document.createComment("q-if"),i=!1,r=!0,o=this.target,s=this.namespace,a=s?[s,o].join("."):o,h=this.filters,c=this.data(),u=this.vm;this.setting.stop=!0,u.$watch(a,function(o,a){o=u.applyFilters(o,h,a),i||o!==!0||(i=!0,u._templateBind(t,{data:c,namespace:s,immediate:!0})),o!==r&&(o===!0?(e.replaceChild(t,n),r=o):o===!1&&(e.replaceChild(n,t),r=o))},!1,!0)}}},el:{bind:function(){this.vm.$$[this.target]=this.el}},repeat:n(11)}},function(t,e,n){function i(t,e,n,i){var r,o,s,a,h=e.length;Object.keys(t).forEach(function(c){~c.indexOf(e)&&(r=c.substring(h+1),o=r.split("."),o.length&&(s=+o.shift(),(s-=i)>=n&&(o.unshift(s),o.unshift(e),a=o.join("."),t[a]=t[c],delete t[c])))})}var r=n(1);methods={"default":{clean:function(t,e){e.length&&(e.forEach(function(e){e.parentNode===t&&t.removeChild(e)}),r.cleanData(e),e.length=0)},insert:function(t,e,n){t.insertBefore(e,n)}},push:{insert:function(t,e,n){t.insertBefore(e,n)},dp:function(t,e){return e.res}},splice:{clean:function(t,e,n,r){var o=n[0],s=n[1],a=n[2].$namespace(),h=e.splice(o,s);return h.forEach(function(e){t.removeChild(e)}),n.done||(i(r,a,o,s),n.done=!0),!0},dp:function(t,e){return e.args.push(t),e.args}}},e.bind=function(){var t,e,n,i,o,s,a,h=this.el,c=this.setting,u=h.parentNode;u&&!c.stop&&(c.stop=!0,t=this.target,e=this.namespace,n=e?[e,t].join("."):t,i=this.filters,o=[],s=document.createComment("q-repeat"),a=this.vm,u.replaceChild(s,h),a.$watch(n,function(t,e,c){if(t=a.applyFilters(t,i),void 0!==t){var f=!i.length&&c?c.method:"default",l=(methods[f]||{}).dp,d=(methods[f]||{}).clean,p=(methods[f]||{}).insert;if(l&&(t=l(t,c)),!d||d(u,o,t,a._watchers,n)!==!0){var m,v=document.createDocumentFragment();t.forEach(function(t,e){m=r.clone(h),a._templateBind(m,{data:t,namespace:t.$namespace(),immediate:!0,useCache:!0}),o.push(m),v.appendChild(m)}),p&&p(u,v,s),a.$emit("repeat-render")}}},!1,!0))}},function(t,e,n){var i=n(13),r=n(1);t.exports=function(t,e){e=e||{};var n=this,o=n.$options.directives,s=(e.index,e.data||n),a=e.namespace;r.walk([t],function(t,h,c){h.forEach(function(h){var u=h.name.substring(2),f=o[u],l=i(h.value);f&&l.forEach(function(i){var o=n._makeReadFilters(i.filters),h=i.target,u=a?[a,h].join("."):h,l=r.isObject(f)?f.update:f,d=r.extend({el:t,vm:n,data:function(t){var e=[];return a&&e.push(a),t&&e.push(t),n.data(e.join("."))},namespace:a,setting:c},i,{filters:o});l&&n.$watch(u,function(t,e){t=n.applyFilters(t,o,e),l.call(d,t,e)},"object"==typeof s[h],"boolean"==typeof e.immediate?e.immediate:void 0!==s[h]),r.isObject(f)&&f.bind&&f.bind.call(d)})})},{useCache:e.useCache})}},function(t,e,n){function i(t){var e=t,n=o.get(e);if(n)return n;for(var i,h,c,u=[],f=s.length,l=!1,d={filter:!1,token:{filters:[]}};t.length;){for(h=0;f>h;h++)if(i=s[h][0].exec(t)){l=!0,c=s[h][1],c&&c(i,d,u),t=t.replace(s[h][0],""),d.filter&&(i=a.exec(t),r(i[0].trim(),d.token),t=t.replace(a,""),d.filter=!1);break}if(!l)throw new Error("Syntax error at: "+t);l=!1}return u.push(d.token),o.put(e,u),u}function r(t,e){for(var n,i=h.length,r=!1;t.length;){for(n=0;i>n;n++)if(captures=h[n][0].exec(t)){r=!0,foo=h[n][1],foo&&foo(captures,e.filters),t=t.replace(h[n][0],"");break}if(!r)throw new Error("Syntax error at: "+t);r=!1}}var o=new(n(2))(1e3),s=[[/^ +/],[/^([\w\-]+):/,function(t,e){e.token.arg=t[1]}],[/^([\w]+)\((.+?)\)/,function(t,e){e.token.target=t[1],e.token.param=t[2].split(/ *, */)}],[/^([\w\-]+)/,function(t,e){e.token.target=t[1]}],[/^(?=\|)/,function(t,e){e.filter=!0}],[/^,/,function(t,e,n){n.push(e.token),e.token={filters:[]}}]],a=/^(.+?)(?=,|$)/,h=[[/^ +/],[/^\| *([\w\-\!]+)/,function(t,e){e.push([t[1]])}],[/^(['"])(((\\['"])?([^\1])*)+)\1/,function(t,e){e[e.length-1].push(t[3])}],[/^([\w\-]+)/,function(t,e){e[e.length-1].push(t[1])}]];t.exports=i}])}),define("third",["require","module","exports","Q.core"],function(t,e,n){function i(t,e){return void 0===e?h[t]:void(h[t]=e)}function r(t,e){return t="string"==typeof t?a.find(t)[0]:t,a.data(t,"third-inst",e)}function o(t,e,n){t="string"==typeof t?a.find(t)[0]:t,this.el=t,this.vm=n||new s,a.extend(this,e),r(t,this),this.bind()}var s=t("Q.core"),a=s._,h={};a.extend(o,{key:i,get:r}),e.exports=o}),define("Q",["require","module","exports","Q.core","third"],function(t,e,n){var i=t("Q.core"),r=t("third"),o=i.options.directives;return o.third={bind:function(){var t=r.key(this.target);if(!t)throw new Error("third party component: "+this.target+" is not defined");var e=this.el.getAttribute("q-ref");t=new r(this.el,t,this.vm),e&&(this.vm.$[e]=t),this.setting.stop=!0}},i}),define("./pages/todomvc/main",["require","module","exports","./director","Q"],function(t,e,n){function i(){var t=new r,e=o.get("#todoapp");["all","active","completed"].forEach(function(n){t.on(n,function(){e.$set("activeFilter",n),e.todos.touch()})}),t.configure({notfound:function(){window.location.hash="",e.$set("activeFilter","all")}}),t.init()}var r=t("./director").Router,o=t("Q");e.exports={init:i}}),define("./components/factory",["require","module","exports","Q","third"],function(t,e,n){var i=t("Q"),r=t("third");e.exports=function(t,e){return"bind"in e&&"unbind"in e&&!("data"in e)?void i._.find(t).forEach(function(t){return new r(t,e)}):e.__extend__?i.require(e.name).all({el:t}):(e.el=t,i.all(e))}}),define("main",["./components/todoapp/main","./pages/todomvc/main","./components/factory"],function(){for(var t=0,e=arguments.length,n=arguments[e-1];e-2>t;t++)arguments[t].init?arguments[t].init():n(".component-"+(t+1),arguments[t]);arguments[e-2].init()});